const modalFeedback=document.querySelector(".modal-feedback"),openFeedback=document.querySelector(".open-modal-feedback"),closeFeedback=modalFeedback.querySelector(".close-modal-feedback"),formFeedback=modalFeedback.querySelector(".form-feedback"),nameFeedback=modalFeedback.querySelector(".feedback-name"),emailFeedback=modalFeedback.querySelector(".feedback-email"),messageFeedback=modalFeedback.querySelector(".feedback-message"),fieldsFormFeedback=modalFeedback.querySelectorAll(".feedback-field");let isStorageSupport=!0,storageName="",storageEmail="",storageMessage="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email"),storageMessage=localStorage.getItem("message")}catch(e){isStorageSupport=!1}function putFocus(a){for(let e=0;e<a.length;e++)if(!a[e].value)return void a[e].focus()}function markEmptyField(a){for(let e=0;e<a.length;e++)a[e].value||a[e].classList.add("feedback-field-error")}function cleanMarkField(a){for(let e=0;e<a.length;e++)a[e].classList.contains("feedback-field-error")&&a[e].classList.remove("feedback-field-error")}openFeedback.addEventListener("click",function(e){e.preventDefault(),modalFeedback.classList.add("open-modal"),cleanMarkField(fieldsFormFeedback),putFocus(fieldsFormFeedback),storageName&&(nameFeedback.value=storageName),storageEmail&&(emailFeedback.value=storageEmail),storageMessage&&(messageFeedback.value=storageMessage)}),formFeedback.addEventListener("submit",function(e){nameFeedback.value&&emailFeedback.value&&messageFeedback.value?isStorageSupport&&(localStorage.setItem("name",nameFeedback.value),localStorage.setItem("email",emailFeedback.value),localStorage.setItem("message",messageFeedback.value)):(e.preventDefault(),modalFeedback.classList.remove("error-form"),modalFeedback.offsetWidth=formFeedback.offsetWidth,modalFeedback.classList.add("error-form"),putFocus(fieldsFormFeedback),markEmptyField(fieldsFormFeedback))}),closeFeedback.addEventListener("click",function(e){e.preventDefault(),modalFeedback.classList.remove("open-modal"),modalFeedback.classList.remove("error-form")}),window.addEventListener("keydown",function(e){27===e.keyCode&&modalFeedback.classList.contains("open-modal")&&(e.preventDefault(),modalFeedback.classList.remove("open-modal"),modalFeedback.classList.remove("error-form"))});
